# Grundlagen

## Erstes Beispiel

PHP-Code wird innerhalb einer Textdatei mit Suffix `.php` geschrieben. PHP-Skripte beginnen mit dem sog. PHP-Tag `<?php`. Falls die Textdatei noch weitere Inhalte (zB HTML) enthält kann PHP-Code auch Blockweise eingefügt werden, dafür müssen Blöcke mit `<?php` geöffnet und `?>` beendet werden.

Jede Anweisungszeile in PHP muss mit einem Semikolon (`;`) abgeschlossen werden. Ausgaben werden über den `echo` Befehl durchgeführt.

```php
<?php
echo "Hallo PHP!";
```

PHP kann als Skript über den PHP-Interpreter auf der Kommandozeile ausgeführt werden. Dazu wird der PHP-Interpreter auf der Kommondozeile ausgeführt und das auszuführende Skript wird als Argument an den Interpreter übergeben:

```bash
> php example.php
Hallo PHP!
```

## PHP in HTML einbetten

PHP kann innerhalb eines HTML-Dokuments eingebettet werden. Die Quellcode-Datei muss mit dem Suffix `.php` abgespeichert werden, sodass der PHP-Interpreter die Datei verarbeitet.

PHP-Code wird innerhalb von PHP-Tags `<?php` und `?>` eingefügt. Der PHP-Code wird am Web-Server verarbeitet und nicht an den Web-Client gesendet.

```php
<html>
    <head>
        <title>Hallo PHP</title>
    </head>
    <body>
        <?php
            // Ein Kommentar: Dieser wird nicht ins HTML geschrieben
            echo "Hallo PHP!";
        ?>
    </body>
</html>
```

## Kommentare

Im PHP-Quellcode können natürlich auch Kommentare eingefügt werden. Es gibt einzeilige- und mehrzeilige Kommentare:

```php
<?php
// einzeiliger Kommentar
# auch ein einzeiliger Kommentar

/*
mehrzeiliger
Kommentar
...
*/
```

## Variablen

Eine Variable in PHP wird mit dem `$`-Zeichen eingeleitet und es folgt ein Variablenbezeichner. Folgende weitere Regeln sind zu beachten:

 - Ein Variablenname muss mit einem Buchstaben oder Unterstrich starten
 - Ab der zweiten Stelle kann ein Variablenname auch Zahlen enthalten
 - Variablennamen sind case-sensitive (`$var` und `$VAR` sind verschiedene Variablen)

```php
<?php
$my_var = 123;
$message = "hello world";
```

## Datentypen

PHP ist eine dynamisch Typisierte Sprache. Das bedeutet es müssen keine Datentypen für Variablen angegeben werden, diese werden vom PHP-Interpreter abgeleitet. Dennoch legt PHP 10 verschiedene Datentypen fest, welche einer Variable implizit entsprechen.

 - Einfache Datentypen: `boolean`, `integer`, `float` und `string`
 - Zusammengesetzte Datentypen: `array`, `object`, `iterable` und `callable`
 - Spezielle Datentypen: `resource`, `NULL`

Die Funktion `var_dump` kann verwendet werden um den Wert und den Datentyp einer Variable auszugeben. Dies ist hilfreich für das Debugging:

```php
<?php
$a = 3.1;
$b = true;
var_dump($a);  // float(3.1)
var_dump($b);  // bool(true)
```

### Boolean

Generell interpretiert PHP alles als `true` außer:

 - den boolschen Wert `false`
 - die Zahlen `0`, `-0`, `0.0`, `-0.0`
 - den Leerstring `""` und `"0"`
 - ein leeres Array `[]`
 - `NULL`

### Casting

PHP unterstützt für jeden Datentyp und weitere Fälle eine `is_*` Funktion. Es kann zB mit der Funktion `is_int` geprüft werden, ob eine Variable dem Datentyp `integer` entspricht.

```php
<?php

$a = "abc";
$b = 123;

echo is_null($a);   // false
echo is_string($a); // true
echo is_float($b)   // false
```

Es kann der Datentyp einer Variable durch Casting explizit verändert werden:

```php
<?php

$var1 = 10;
$var2 = (bool) $var1;
var_dump($var2)  // bool(true)
```

Folgende Casting Operationen sind definiert:

 - `(int)`, `(integer)` in Integer casten
 - `(bool)`, `(boolean)` in Boolean casten
 - `(float)`, `(double)`, `(real)` in Float casten
 - `(string)` in String casten
 - `(array)` in Array casten
 - `(object)` in Objekt casten

## Operatoren

PHP verfügt über alle gängigen Operatoren, wie sie aus anderen Programmiersprachen bekannt sind. Einige wichtige Ergänzungen:

| Operator | Bezeichnung                           |
| -------- | ------------------------------------- |
| `.`      | String Konkatenation                  |
| `??`     | Null-Coalesing Operator               |
| `?:`     | Elvis Operator                        |
| `<=>`    | Spaceship Operator                    |
| `===`    | Vergleichsoperator: Wert und Datentyp |

#### String Konkatenation

```php
<?php
$str = "abc";
$res = $str . "-" . "def";
echo $res;  // abc-def
```

#### Null-Coalesing Operator

Zuweisung eines Default-Wertes für eine Variable. Der erste Wert der existiert und nicht `NULL` ist. Im Beispiel ist `$z` nicht definiert, `$a` hat den Wert `NULL` und `$b` den Wert `10`. Die Null-Coalesing Kette wird solange durchgeführt bis ein gültiger Wert gefunden wird.

```php
<?php

$a = NULL;
$b = 10;
$c = $z ?? $a ?? $b;
echo $c;  // 10
```

#### Elvis Operator

Der Elvis Operator ist eine Vereinfachung des bekannten ternären Operators: `linker Ausdruck ?: rechter Ausdruck`. Die Logik ist dabei so gestaltet, dass wenn der linke Ausdruck als wahr interpretiert wird, dieser zurückgegeben wird ansonsten der rechte Ausdruck (als Alternative).

```php
<?php
$a = 5 ?: 10;
$b = 0 ?: 10;

echo $a;  // 5
echo $b;  // 10
```

#### Spaceship Operator

Der Spaceship Operator ist ein spezieller Operator um Ausdrücke zu vergleichen. Dieser gibt die Werte `-1`, `0` oder `1` zurück, je nachdem ob der erste Ausdruck kleiner, gleich oder größer als der zweite Ausdruck ist. Der Spaceship Operator kann auch für Strings verwendet werden:

```php
<?php

echo 1 <=> 1; // 0
echo 1 <=> 0; // 1
echo 0 <=> 1; // -1

echo "a" <=> "a"; // 0
echo "z" <=> "a"; // 1
echo "a" <=> "z"; // -1
```

#### Vergleichsoperator

Generell sind 2 Vergleichsoperatoren zu unterscheiden `==` und `===`. Erster untersucht nur ob zwei Werte identisch sind, so wäre `"5" == 5` wahr. Der zweite Vergleichoperator untersucht jedoch auch, ob die 2 Operanden den selben Datentyp haben, somit wäre `"5" === 5` falsch.

## Bedingte Ausdrücke

```php
<?php
$var = 10

if ($var == 5) {
    echo "Der Wert ist 5";
} elseif ($var < 5) {
    echo "Der Wert ist kleiner als 5";
} else {
    echo "Der Wert ist größer als 5";
}
```

PHP verfügt auch über einen `switch`-Ausdruck, dieser kann in der PHP-Dokumentation nachgelesen werden.
